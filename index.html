<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechBlog - Share Your Ideas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .blog-card {
            transition: all 0.3s ease;
        }
        
        .blog-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .comment-thread {
            border-left: 2px solid #e5e7eb;
            margin-left: 1rem;
            padding-left: 1rem;
        }
        
        .like-btn {
            transition: all 0.2s ease;
        }
        
        .like-btn:hover {
            transform: scale(1.1);
        }
        
        .like-btn.liked {
            color: #ef4444;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .search-highlight {
            background-color: #fef3c7;
            padding: 2px 4px;
            border-radius: 3px;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-indigo-600">TechBlog</h1>
                </div>
                
                <div class="hidden md:flex items-center space-x-6">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Search blogs..." 
                               class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        <svg class="absolute left-3 top-2.5 h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </div>
                    
                    <select id="categoryFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500">
                        <option value="">All Categories</option>
                        <option value="technology">Technology</option>
                        <option value="design">Design</option>
                        <option value="development">Development</option>
                        <option value="ai">AI & ML</option>
                    </select>
                </div>
                
                <div class="flex items-center space-x-4">
                    <button id="loginBtn" class="text-gray-700 hover:text-indigo-600 font-medium">Login</button>
                    <button id="signupBtn" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors">Sign Up</button>
                    <button id="newPostBtn" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors hidden">New Post</button>
                    <div id="userProfile" class="hidden flex items-center space-x-2">
                        <div class="w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm">U</div>
                        <span class="text-gray-700 font-medium">User</span>
                        <button id="logoutBtn" class="text-red-600 hover:text-red-700 text-sm">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Hero Section -->
        <div id="heroSection" class="text-center mb-12">
            <h2 class="text-4xl font-bold text-gray-900 mb-4">Share Your Ideas with the World</h2>
            <p class="text-xl text-gray-600 mb-8">Join our community of writers and readers. Create, discover, and engage with amazing content.</p>
            <div class="flex flex-wrap justify-center gap-2 mb-6">
                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">#Technology</span>
                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">#Design</span>
                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm">#Development</span>
                <span class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm">#AI</span>
            </div>
        </div>

        <!-- Blog Posts Grid -->
        <div id="blogGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
            <!-- Blog posts will be dynamically inserted here -->
        </div>

        <!-- Load More Button -->
        <div class="text-center">
            <button id="loadMoreBtn" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors">
                Load More Posts
            </button>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <h3 class="text-2xl font-bold mb-6 text-center">Login to Your Account</h3>
            <form id="loginForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Email</label>
                    <input type="email" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Password</label>
                    <input type="password" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition-colors">
                    Login
                </button>
            </form>
            <button id="closeLoginModal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signupModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <h3 class="text-2xl font-bold mb-6 text-center">Create Your Account</h3>
            <form id="signupForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Full Name</label>
                    <input type="text" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Email</label>
                    <input type="email" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Password</label>
                    <input type="password" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <button type="submit" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors">
                    Sign Up
                </button>
            </form>
            <button id="closeSignupModal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- New Post Modal -->
    <div id="newPostModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <h3 class="text-2xl font-bold mb-6 text-center">Create New Blog Post</h3>
            <form id="newPostForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Title</label>
                    <input type="text" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Category</label>
                    <select required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                        <option value="">Select Category</option>
                        <option value="technology">Technology</option>
                        <option value="design">Design</option>
                        <option value="development">Development</option>
                        <option value="ai">AI & ML</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Tags (comma separated)</label>
                    <input type="text" placeholder="react, javascript, web development" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Content</label>
                    <textarea required rows="10" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500" placeholder="Write your blog post content here..."></textarea>
                </div>
                <button type="submit" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors">
                    Publish Post
                </button>
            </form>
            <button id="closeNewPostModal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Blog Detail Modal -->
    <div id="blogDetailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div id="blogDetailContent">
                <!-- Blog detail content will be inserted here -->
            </div>
        </div>
    </div>

    <script>
        // Sample blog data
        let blogPosts = [
            {
                id: 1,
                title: "The Future of Web Development: Trends to Watch in 2024",
                author: "Sarah Johnson",
                category: "technology",
                tags: ["web development", "trends", "2024"],
                content: "Web development is evolving rapidly, with new frameworks, tools, and methodologies emerging constantly. In this comprehensive guide, we'll explore the key trends that are shaping the future of web development...",
                date: "2024-01-15",
                likes: 42,
                comments: [
                    {
                        id: 1,
                        author: "Mike Chen",
                        content: "Great insights! I'm particularly excited about the serverless architecture trends.",
                        date: "2024-01-16",
                        likes: 5,
                        replies: [
                            {
                                id: 2,
                                author: "Sarah Johnson",
                                content: "Thanks Mike! Serverless is definitely game-changing for scalability.",
                                date: "2024-01-16",
                                likes: 2
                            }
                        ]
                    },
                    {
                        id: 3,
                        author: "Emma Davis",
                        content: "The section on AI integration was fascinating. Do you think it will replace traditional coding?",
                        date: "2024-01-17",
                        likes: 8,
                        replies: []
                    }
                ]
            },
            {
                id: 2,
                title: "Mastering React Hooks: A Complete Guide",
                author: "Alex Rodriguez",
                category: "development",
                tags: ["react", "hooks", "javascript"],
                content: "React Hooks have revolutionized how we write React components. This comprehensive guide covers everything from useState to custom hooks...",
                date: "2024-01-12",
                likes: 38,
                comments: [
                    {
                        id: 4,
                        author: "Lisa Wang",
                        content: "This is exactly what I needed! The useEffect examples are super clear.",
                        date: "2024-01-13",
                        likes: 3,
                        replies: []
                    }
                ]
            },
            {
                id: 3,
                title: "UI/UX Design Principles for Modern Applications",
                author: "David Kim",
                category: "design",
                tags: ["ui", "ux", "design"],
                content: "Creating intuitive and beautiful user interfaces requires understanding fundamental design principles. Let's explore the key concepts...",
                date: "2024-01-10",
                likes: 29,
                comments: []
            },
            {
                id: 4,
                title: "Machine Learning in Web Applications: Getting Started",
                author: "Dr. Rachel Green",
                category: "ai",
                tags: ["machine learning", "ai", "web apps"],
                content: "Integrating machine learning capabilities into web applications is becoming increasingly accessible. Here's how to get started...",
                date: "2024-01-08",
                likes: 51,
                comments: [
                    {
                        id: 5,
                        author: "Tom Wilson",
                        content: "The TensorFlow.js examples are really helpful. Thanks for sharing!",
                        date: "2024-01-09",
                        likes: 4,
                        replies: []
                    }
                ]
            }
        ];

        let currentUser = null;
        let filteredPosts = [...blogPosts];
        let displayedPosts = 3;

        // DOM elements
        const loginBtn = document.getElementById('loginBtn');
        const signupBtn = document.getElementById('signupBtn');
        const newPostBtn = document.getElementById('newPostBtn');
        const userProfile = document.getElementById('userProfile');
        const logoutBtn = document.getElementById('logoutBtn');
        const loginModal = document.getElementById('loginModal');
        const signupModal = document.getElementById('signupModal');
        const newPostModal = document.getElementById('newPostModal');
        const blogDetailModal = document.getElementById('blogDetailModal');
        const blogGrid = document.getElementById('blogGrid');
        const searchInput = document.getElementById('searchInput');
        const categoryFilter = document.getElementById('categoryFilter');
        const loadMoreBtn = document.getElementById('loadMoreBtn');

        // Initialize the application
        function init() {
            renderBlogPosts();
            setupEventListeners();
        }

        // Setup event listeners
        function setupEventListeners() {
            // Modal controls
            loginBtn.addEventListener('click', () => showModal(loginModal));
            signupBtn.addEventListener('click', () => showModal(signupModal));
            newPostBtn.addEventListener('click', () => showModal(newPostModal));
            logoutBtn.addEventListener('click', logout);

            // Close modal buttons
            document.getElementById('closeLoginModal').addEventListener('click', () => hideModal(loginModal));
            document.getElementById('closeSignupModal').addEventListener('click', () => hideModal(signupModal));
            document.getElementById('closeNewPostModal').addEventListener('click', () => hideModal(newPostModal));

            // Form submissions
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('signupForm').addEventListener('submit', handleSignup);
            document.getElementById('newPostForm').addEventListener('submit', handleNewPost);

            // Search and filter
            searchInput.addEventListener('input', handleSearch);
            categoryFilter.addEventListener('change', handleCategoryFilter);

            // Load more posts
            loadMoreBtn.addEventListener('click', loadMorePosts);

            // Close modals when clicking outside
            [loginModal, signupModal, newPostModal, blogDetailModal].forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        hideModal(modal);
                    }
                });
            });
        }

        // Modal functions
        function showModal(modal) {
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function hideModal(modal) {
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        // Authentication functions
        function handleLogin(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const email = formData.get('email') || e.target.querySelector('input[type="email"]').value;
            
            // Simulate login
            currentUser = {
                name: email.split('@')[0],
                email: email
            };
            
            updateAuthUI();
            hideModal(loginModal);
            showNotification('Successfully logged in!', 'success');
        }

        function handleSignup(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const name = e.target.querySelector('input[type="text"]').value;
            const email = e.target.querySelector('input[type="email"]').value;
            
            // Simulate signup
            currentUser = {
                name: name,
                email: email
            };
            
            updateAuthUI();
            hideModal(signupModal);
            showNotification('Account created successfully!', 'success');
        }

        function logout() {
            currentUser = null;
            updateAuthUI();
            showNotification('Logged out successfully!', 'info');
        }

        function updateAuthUI() {
            if (currentUser) {
                loginBtn.classList.add('hidden');
                signupBtn.classList.add('hidden');
                newPostBtn.classList.remove('hidden');
                userProfile.classList.remove('hidden');
                userProfile.querySelector('span').textContent = currentUser.name;
                userProfile.querySelector('div').textContent = currentUser.name.charAt(0).toUpperCase();
            } else {
                loginBtn.classList.remove('hidden');
                signupBtn.classList.remove('hidden');
                newPostBtn.classList.add('hidden');
                userProfile.classList.add('hidden');
            }
        }

        // Blog post functions
        function renderBlogPosts() {
            const postsToShow = filteredPosts.slice(0, displayedPosts);
            blogGrid.innerHTML = '';
            
            postsToShow.forEach(post => {
                const postElement = createBlogPostElement(post);
                blogGrid.appendChild(postElement);
            });

            // Show/hide load more button
            if (displayedPosts >= filteredPosts.length) {
                loadMoreBtn.style.display = 'none';
            } else {
                loadMoreBtn.style.display = 'block';
            }
        }

        function createBlogPostElement(post) {
            const postDiv = document.createElement('div');
            postDiv.className = 'blog-card bg-white rounded-lg shadow-md overflow-hidden cursor-pointer fade-in';
            
            postDiv.innerHTML = `
                <div class="p-6">
                    <div class="flex items-center justify-between mb-3">
                        <span class="bg-${getCategoryColor(post.category)}-100 text-${getCategoryColor(post.category)}-800 px-2 py-1 rounded-full text-xs font-semibold uppercase">
                            ${post.category}
                        </span>
                        <span class="text-gray-500 text-sm">${formatDate(post.date)}</span>
                    </div>
                    
                    <h3 class="text-xl font-bold text-gray-900 mb-3 line-clamp-2">${post.title}</h3>
                    <p class="text-gray-600 mb-4 line-clamp-3">${post.content}</p>
                    
                    <div class="flex flex-wrap gap-1 mb-4">
                        ${post.tags.map(tag => `<span class="bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs">#${tag}</span>`).join('')}
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm">
                                ${post.author.charAt(0)}
                            </div>
                            <span class="text-gray-700 font-medium">${post.author}</span>
                        </div>
                        
                        <div class="flex items-center space-x-4">
                            <button class="like-btn flex items-center space-x-1 text-gray-500 hover:text-red-500" onclick="toggleLike(${post.id}, 'post')">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                </svg>
                                <span>${post.likes}</span>
                            </button>
                            <div class="flex items-center space-x-1 text-gray-500">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"></path>
                                </svg>
                                <span>${post.comments.length}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            postDiv.addEventListener('click', () => showBlogDetail(post));
            return postDiv;
        }

        function getCategoryColor(category) {
            const colors = {
                technology: 'blue',
                design: 'purple',
                development: 'green',
                ai: 'orange'
            };
            return colors[category] || 'gray';
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        function showBlogDetail(post) {
            const content = document.getElementById('blogDetailContent');
            content.innerHTML = `
                <div class="p-8">
                    <button id="closeBlogDetail" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                    
                    <div class="mb-6">
                        <div class="flex items-center justify-between mb-4">
                            <span class="bg-${getCategoryColor(post.category)}-100 text-${getCategoryColor(post.category)}-800 px-3 py-1 rounded-full text-sm font-semibold uppercase">
                                ${post.category}
                            </span>
                            <span class="text-gray-500">${formatDate(post.date)}</span>
                        </div>
                        
                        <h1 class="text-3xl font-bold text-gray-900 mb-4">${post.title}</h1>
                        
                        <div class="flex items-center space-x-3 mb-4">
                            <div class="w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-semibold">
                                ${post.author.charAt(0)}
                            </div>
                            <div>
                                <div class="font-medium text-gray-900">${post.author}</div>
                                <div class="text-gray-500 text-sm">${formatDate(post.date)}</div>
                            </div>
                        </div>
                        
                        <div class="flex flex-wrap gap-2 mb-6">
                            ${post.tags.map(tag => `<span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm">#${tag}</span>`).join('')}
                        </div>
                    </div>
                    
                    <div class="prose max-w-none mb-8">
                        <p class="text-gray-700 leading-relaxed">${post.content}</p>
                    </div>
                    
                    <div class="flex items-center space-x-6 mb-8 pb-6 border-b">
                        <button class="like-btn flex items-center space-x-2 text-gray-600 hover:text-red-500" onclick="toggleLike(${post.id}, 'post')">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                            </svg>
                            <span>${post.likes} Likes</span>
                        </button>
                        <div class="flex items-center space-x-2 text-gray-600">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"></path>
                            </svg>
                            <span>${post.comments.length} Comments</span>
                        </div>
                    </div>
                    
                    <!-- Comments Section -->
                    <div class="comments-section">
                        <h3 class="text-xl font-bold mb-6">Comments</h3>
                        
                        ${currentUser ? `
                            <div class="mb-6">
                                <form id="commentForm" class="space-y-4">
                                    <textarea placeholder="Share your thoughts..." rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none"></textarea>
                                    <button type="submit" class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors">
                                        Post Comment
                                    </button>
                                </form>
                            </div>
                        ` : `
                            <div class="mb-6 p-4 bg-gray-50 rounded-lg text-center">
                                <p class="text-gray-600 mb-3">Please log in to join the conversation</p>
                                <button onclick="showModal(loginModal)" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors">
                                    Login to Comment
                                </button>
                            </div>
                        `}
                        
                        <div id="commentsList">
                            ${renderComments(post.comments, post.id)}
                        </div>
                    </div>
                </div>
            `;
            
            showModal(blogDetailModal);
            
            // Setup close button
            document.getElementById('closeBlogDetail').addEventListener('click', () => hideModal(blogDetailModal));
            
            // Setup comment form if user is logged in
            if (currentUser) {
                document.getElementById('commentForm').addEventListener('submit', (e) => handleNewComment(e, post.id));
            }
        }

        function renderComments(comments, postId, level = 0) {
            return comments.map(comment => `
                <div class="comment mb-6 ${level > 0 ? 'comment-thread' : ''}">
                    <div class="flex space-x-3">
                        <div class="w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center text-white font-semibold text-sm">
                            ${comment.author.charAt(0)}
                        </div>
                        <div class="flex-1">
                            <div class="bg-gray-50 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium text-gray-900">${comment.author}</span>
                                    <span class="text-gray-500 text-sm">${formatDate(comment.date)}</span>
                                </div>
                                <p class="text-gray-700">${comment.content}</p>
                            </div>
                            
                            <div class="flex items-center space-x-4 mt-2">
                                <button class="like-btn flex items-center space-x-1 text-gray-500 hover:text-red-500" onclick="toggleLike(${comment.id}, 'comment')">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                    </svg>
                                    <span>${comment.likes}</span>
                                </button>
                                ${currentUser ? `
                                    <button class="text-gray-500 hover:text-indigo-600 text-sm" onclick="showReplyForm(${comment.id})">
                                        Reply
                                    </button>
                                ` : ''}
                            </div>
                            
                            <div id="replyForm-${comment.id}" class="hidden mt-3">
                                <form onsubmit="handleReply(event, ${postId}, ${comment.id})" class="space-y-3">
                                    <textarea placeholder="Write a reply..." rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 resize-none"></textarea>
                                    <div class="flex space-x-2">
                                        <button type="submit" class="bg-indigo-600 text-white px-4 py-1 rounded text-sm hover:bg-indigo-700 transition-colors">
                                            Reply
                                        </button>
                                        <button type="button" onclick="hideReplyForm(${comment.id})" class="bg-gray-300 text-gray-700 px-4 py-1 rounded text-sm hover:bg-gray-400 transition-colors">
                                            Cancel
                                        </button>
                                    </div>
                                </form>
                            </div>
                            
                            ${comment.replies && comment.replies.length > 0 ? renderComments(comment.replies, postId, level + 1) : ''}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function handleNewComment(e, postId) {
            e.preventDefault();
            if (!currentUser) return;
            
            const textarea = e.target.querySelector('textarea');
            const content = textarea.value.trim();
            
            if (!content) return;
            
            const post = blogPosts.find(p => p.id === postId);
            if (!post) return;
            
            const newComment = {
                id: Date.now(),
                author: currentUser.name,
                content: content,
                date: new Date().toISOString().split('T')[0],
                likes: 0,
                replies: []
            };
            
            post.comments.push(newComment);
            textarea.value = '';
            
            // Refresh the blog detail view
            showBlogDetail(post);
            showNotification('Comment added successfully!', 'success');
        }

        function showReplyForm(commentId) {
            const form = document.getElementById(`replyForm-${commentId}`);
            form.classList.remove('hidden');
        }

        function hideReplyForm(commentId) {
            const form = document.getElementById(`replyForm-${commentId}`);
            form.classList.add('hidden');
        }

        function handleReply(e, postId, parentCommentId) {
            e.preventDefault();
            if (!currentUser) return;
            
            const textarea = e.target.querySelector('textarea');
            const content = textarea.value.trim();
            
            if (!content) return;
            
            const post = blogPosts.find(p => p.id === postId);
            if (!post) return;
            
            const parentComment = findComment(post.comments, parentCommentId);
            if (!parentComment) return;
            
            const newReply = {
                id: Date.now(),
                author: currentUser.name,
                content: content,
                date: new Date().toISOString().split('T')[0],
                likes: 0
            };
            
            if (!parentComment.replies) {
                parentComment.replies = [];
            }
            parentComment.replies.push(newReply);
            
            // Refresh the blog detail view
            showBlogDetail(post);
            showNotification('Reply added successfully!', 'success');
        }

        function findComment(comments, commentId) {
            for (const comment of comments) {
                if (comment.id === commentId) {
                    return comment;
                }
                if (comment.replies) {
                    const found = findComment(comment.replies, commentId);
                    if (found) return found;
                }
            }
            return null;
        }

        function toggleLike(id, type) {
            if (type === 'post') {
                const post = blogPosts.find(p => p.id === id);
                if (post) {
                    post.likes++;
                    renderBlogPosts();
                    showNotification('Post liked!', 'success');
                }
            } else if (type === 'comment') {
                // Find and update comment likes across all posts
                for (const post of blogPosts) {
                    const comment = findComment(post.comments, id);
                    if (comment) {
                        comment.likes++;
                        showNotification('Comment liked!', 'success');
                        break;
                    }
                }
            }
        }

        function handleNewPost(e) {
            e.preventDefault();
            if (!currentUser) return;
            
            const formData = new FormData(e.target);
            const title = e.target.querySelector('input[type="text"]').value;
            const category = e.target.querySelector('select').value;
            const tags = e.target.querySelector('input[placeholder*="comma"]').value.split(',').map(tag => tag.trim());
            const content = e.target.querySelector('textarea').value;
            
            const newPost = {
                id: Date.now(),
                title: title,
                author: currentUser.name,
                category: category,
                tags: tags,
                content: content,
                date: new Date().toISOString().split('T')[0],
                likes: 0,
                comments: []
            };
            
            blogPosts.unshift(newPost);
            filteredPosts = [...blogPosts];
            renderBlogPosts();
            hideModal(newPostModal);
            e.target.reset();
            showNotification('Blog post published successfully!', 'success');
        }

        function handleSearch() {
            const query = searchInput.value.toLowerCase();
            filteredPosts = blogPosts.filter(post => 
                post.title.toLowerCase().includes(query) ||
                post.content.toLowerCase().includes(query) ||
                post.author.toLowerCase().includes(query) ||
                post.tags.some(tag => tag.toLowerCase().includes(query))
            );
            displayedPosts = 3;
            renderBlogPosts();
        }

        function handleCategoryFilter() {
            const category = categoryFilter.value;
            if (category) {
                filteredPosts = blogPosts.filter(post => post.category === category);
            } else {
                filteredPosts = [...blogPosts];
            }
            displayedPosts = 3;
            renderBlogPosts();
        }

        function loadMorePosts() {
            displayedPosts += 3;
            renderBlogPosts();
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg text-white font-medium transition-all duration-300 transform translate-x-full`;
            
            const bgColor = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                info: 'bg-blue-500'
            }[type] || 'bg-blue-500';
            
            notification.classList.add(bgColor);
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Initialize the application
        init();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98a250a4654c4da5',t:'MTc1OTcyMzg4OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
